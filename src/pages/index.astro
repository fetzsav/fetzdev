---
import PageLayout from '../layouts/BaseLayout.astro'
import Section from '../components/Section.astro'
import Card from '../components/Card.astro'
import ProjectCard from '../components/ProjectCard.astro'
import Label from '../components/Label.astro'
import SkillLayout from '../components/SkillLayout.astro'
import PostPreview from '@/components/blog/PostPreview.astro'

import { Image } from 'astro:assets'
import astro from '../assets/about-astro.png'

import { getAllPosts, sortMDByDate } from '@/utils'

// ====== Tailored Skills ======
const languages = ['Python', 'Go', 'TypeScript', 'Rust', 'C/C++', 'Bash', 'SQL']
const frontend = ['React', 'Next.js', 'Astro', 'Tailwind CSS', 'shadcn/ui', 'Vite', 'Framer Motion']
const backend = [
  'Node.js', 'FastAPI', 'Express', 'PostgreSQL', 'Redis', 'MQTT',
  'OpenCV', 'TensorRT', 'Docker', 'Docker Compose', 'GitHub Actions', 'Caddy', 'Linux'
]
const others = [
  'Proxmox', 'KVM/QEMU', 'OPNsense', 'WireGuard',
  'Home Assistant', 'Frigate', 'ZFS/LVM', 'Grafana/Prometheus', 'CI/CD', 'Git'
]

// ====== Blog posts (unchanged) ======
const MAX_POSTS = 10
const allPosts = await getAllPosts()
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS)
---

<PageLayout meta={{ title: 'Home' }}>
  <div class='flex w-full flex-col gap-y-10'>
    <section class='flex flex-col items-center gap-y-7'>
      <Image
        src={astro}
        alt='profile photo'
        class='h-28 w-auto rounded-full bg-[#FFBE98] p-2'
        loading='eager'
      />

      <div class='flex flex-col items-center gap-y-4'>
        <h1 class='text-3xl font-bold'>Fetzer Noah</h1>

        <div class='flex flex-wrap justify-center gap-x-7 gap-y-3'>
          <Label title='GitHub' as='a' href='https://github.com/fetzsav' target='_blank'>
            <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' class='h-5 w-5' slot='icon'>
              <path fill='currentColor' d='M12 .5A11.5 11.5 0 0 0 .5 12C.5 17.3 4 21.8 8.8 23v-3.6c-1.7.4-2.1-.7-2.1-.7c-.3-.9-.8-1.1-.8-1.1c-.7-.5.1-.5.1-.5c.8.1 1.2.9 1.2.9c.7 1.2 1.9.8 2.3.6c.1-.5.3-.8.5-1c-2.7-.3-5.6-1.4-5.6-6.1c0-1.3.5-2.4 1.2-3.3c-.1-.3-.5-1.5.1-3.1c0 0 1-.3 3.3 1.2c.9-.2 1.8-.3 2.7-.3c.9 0 1.8.1 2.7.3c2.3-1.5 3.3-1.2 3.3-1.2c.6 1.6.2 2.8.1 3.1c.8.9 1.2 2 1.2 3.3c0 4.7-2.9 5.8-5.6 6.1c.3.2.6.7.6 1.5V23C20 21.8 23.5 17.3 23.5 12A11.5 11.5 0 0 0 12 .5'/>
            </svg>
          </Label>

          <Label
            title='LinkedIn'
            as='a'
            href='https://www.linkedin.com/in/example/'
            target='_blank'
          >
            <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' slot='icon' class='h-5 w-5 text-foreground/75'>
              <path fill='currentColor' d='M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248c-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586c.173-.431.568-.878 1.232-.878c.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252c-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z'/>
            </svg>
          </Label>
        </div>
      </div>
    </section>

    <Section title='About'>
      <p class='text-muted-foreground'>
        Early-career software engineer with production-quality personal projects and open-source
        contributions in Rust, Python/TypeScript, and modern web stacks. I build end-to-end systems:
        from GPU-accelerated computer vision (Frigate/YOLOX+TensorRT) and homelab orchestration
        (Docker/CI, OPNsense, Proxmox/KVM) to AI-assisted document classification and polished
        Next.js/Astro websites. I value strong testing, CI/CD, and measurable impact.
      </p>
    </Section>

    {
      allPostsByDate.length > 0 && (
        <Section title='Posts'>
          <ul class='flex flex-col gap-y-2'>
            {allPostsByDate.map((p) => (
              <li class='flex flex-col gap-x-2 sm:flex-row'>
                <PostPreview post={p} />
              </li>
            ))}
          </ul>
        </Section>
      )
    }

    <Section title='Experience'>
      <Card
        heading='masterformat.ai â€” Creator'
        subheading='AI website/agent for CSI MasterFormat coding'
        date='2025â€“Present'
        imagePath='/src/assets/coming-soon.png'
        altText='masterformat.ai'
        imageClass='h-12 w-auto md:-left-16'
        href='https://github.com/fetzsav/masterformat.ai'
        as='a'
      >
        <ul class='ml-4 list-disc text-muted-foreground'>
          <li>Ingests work receipts and assigns CSI MasterFormat division/section with confidence scores.</li>
          <li>End-to-end pipeline: upload â†’ OCR/text parsing â†’ entity extraction â†’ code suggestion â†’ human-in-the-loop review/export (CSV/JSON).</li>
          <li>Audit trail, error handling, admin dashboard; designed for future webhook/API integration with accounting tools.</li>
        </ul>
      </Card>
<Card
  heading="Dice Image Generator â€” Creator"
  subheading="Rust image tooling for procedural dice assets"
  date="2025"
  imagePath="/src/assets/coming-soon.png"
  altText="Dice Generator"
  imageClass="h-12 w-auto md:-left-16"
  as="div"
>
  <ul class="ml-4 list-disc text-muted-foreground">
    <li>Uses <code>image</code>, <code>imageproc</code>, and <code>ab_glyph</code> to render faces and overlay reference text into RGBA PNGs.</li>
    <li>Type-safe model (<code>DiceSides</code> enum, <code>Dice</code> struct) and compositing utilities for batch generation.</li>
    <li>Embedded DejaVuSans-Bold; layout helpers to annotate outputs with dimensions/totals for reproducibility.</li>
  </ul>

  <div class="mt-4 flex flex-wrap gap-3">
    <a
      href="/dice"
      class="inline-flex items-center gap-2 rounded-md bg-foreground px-4 py-2 text-background shadow-sm transition hover:opacity-90"
    >
      ðŸŽ² Try the demo
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
      </svg>
    </a>

    <a
      href="https://github.com/fetzsav/dice"
      target="_blank"
      rel="noreferrer"
      class="inline-flex items-center gap-2 rounded-md border px-4 py-2 text-foreground transition hover:bg-accent/50"
    >
      View code
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M14 3h7v7m0-7L10 14m-4 0H3v7h7v-3" />
      </svg>
    </a>
  </div>
</Card>

      <!-- ONLY THIS CARD CHANGED TO PREVENT OVERLAP -->
      <Card
        heading='Tauri â€” Open-Source Contributor'
        subheading='Linux packaging (Snap) for Rust desktop framework'
        date='Mar 2023â€“Present'
        imagePath='/src/assets/about-astro.png'
        altText='Tauri OSS'
        imageClass='h-12 w-auto md:-left-16'
      >
        <ul class='ml-4 list-disc text-muted-foreground break-words overflow-hidden'>
          <li>Proposed first-class Snap packaging support for the Tauri CLI, broadening Linux distribution options.</li>
          <li>Implemented packaging config generation and documented constraints; collaborated with maintainers on review/roadmap.</li>
          <li class='mt-2'>
            PRs:
            <a class='underline hover:opacity-80 break-all' href='https://github.com/tauri-apps/tauri/pull/6532' target='_blank' rel='noreferrer'>tauri#6532</a>
            &nbsp;â€¢&nbsp;
            <a class='underline hover:opacity-80 break-all' href='https://github.com/akshit20421/tauri/pull/3' target='_blank' rel='noreferrer'>fork PR #3</a>
          </li>
        </ul>
      </Card>

      <Card
        heading='Home-Automation Security Stack â€” Creator'
        subheading='Frigate + Home Assistant on VLAN-segmented homelab'
        date='2023â€“Present'
        imagePath='/src/assets/coming-soon.png'
        altText='Frigate + Home Assistant'
        imageClass='h-12 w-auto md:-left-16'
      >
        <ul class='ml-4 list-disc text-muted-foreground'>
          <li>GPU-accelerated detection (YOLOX + TensorRT) on NVIDIA; ~60% lower inference latency, CPU 85% â†’ 30%.</li>
          <li>Dockerized services w/ health checks; MQTT events drive HA automations; CI runs lint/tests on PRs.</li>
          <li>Deployed behind OPNsense with VLAN isolation for least-privilege access.</li>
        </ul>
      </Card>

      <Card
        heading='Media Server Pipeline â€” Maintainer'
        subheading='Plex/Jellyfin â€¢ Sonarr/Radarr â€¢ Caddy â€¢ GitHub Actions'
        date='2022â€“Present'
        imagePath='/src/assets/coming-soon.png'
        altText='Media Stack'
        imageClass='h-12 w-auto md:-left-16'
      >
        <ul class='ml-4 list-disc text-muted-foreground'>
          <li>Orchestrated with Docker Compose + dependency healthchecks; signed image publishing via GitHub Actions.</li>
          <li>Reduced deploy time 30m â†’ 5m; eliminated config drift; codified env/secrets and rollback strategy.</li>
          <li>Hardened Caddy reverse proxy and tuned HW transcoding; added monitoring/logging for faster triage.</li>
        </ul>
      </Card>

      <Card
        heading='Next.js + Tailwind â€” Developer'
        subheading='SEO-ready site with ISR & image optimization'
        date='2024'
        imagePath='/src/assets/coming-soon.png'
        altText='Next.js Site'
        imageClass='h-12 w-auto md:-left-16'
      >
        <ul class='ml-4 list-disc text-muted-foreground'>
          <li>Built on App Router with ISR and image optimization; Core Web Vitals LCP &lt; 2.0s on mid-tier hardware.</li>
          <li>Preview deployments per PR and automated checks (lint/type/test) as quality gates.</li>
          <li>A11y improvements and structured data for better crawlability and rich results.</li>
        </ul>
      </Card>

      <Card
        heading='Embedded Telemetry (STM32 + CAN + OLED) â€” Developer'
        subheading='Real-time vehicle data display'
        date='2024'
        imagePath='/src/assets/coming-soon.png'
        altText='Embedded Telemetry'
        imageClass='h-12 w-auto md:-left-16'
      >
        <ul class='ml-4 list-disc text-muted-foreground'>
          <li>CAN frame parsing + SH1106/SSD1306 OLED telemetry; refresh rate 5Hz â†’ 30Hz with HAL refactors.</li>
          <li>Stabilized SPI/I2C; unit tests for parser + fault-injection to catch bus anomalies.</li>
          <li>Pinout/docs and bring-up procedures to shorten collaborator setup time.</li>
        </ul>
      </Card>
    </Section>

    <Section title='Education'>
      <Card
        heading='Independent & Open-Source Learning'
        subheading='Project-driven practice across systems, backend, and web'
        date='Ongoing'
        imagePath='/src/assets/about-astro.png'
        altText='Learning'
        imageClass='h-12 w-auto md:-left-16'
      >
        <ul class='ml-4 list-disc text-muted-foreground'>
          <li>Algorithms/Data Structures â€¢ Operating Systems â€¢ Networking â€¢ Databases â€¢ ML/Computer Vision (self-study).</li>
          <li>Hands-on labs in homelab environments (Proxmox/KVM, OPNsense, VLANs) and open-source collaboration.</li>
        </ul>
      </Card>
    </Section>

    <Section title='Projects'>
      <div class='flex flex-col gap-y-3 sm:flex-row sm:gap-x-3 sm:gap-y-0'>
        <ProjectCard
          href='https://github.com/fetzsav/masterformat.ai'
          heading='masterformat.ai'
          subheading='AI agent classifying receipts to CSI MasterFormat codes'
          imagePath='/src/assets/coming-soon.png'
          altText='masterformat.ai'
          class='w-full sm:w-1/2'
        />
        <ProjectCard
          href='/dice'
          heading='Dice Image Generator'
          subheading='Rust procedural renderer for labeled dice assets'
          imagePath='/src/assets/coming-soon.png'
          altText='dice'
          class='w-full sm:w-1/2'
        />
      </div>
    </Section>

    <Section title='Certifications'>
      <Card
        as='div'
        heading='â€”'
        subheading='Add certifications here when available (e.g., AWS CCP).'
        date=''
        imagePath='/src/assets/about-astro.png'
        altText='Placeholder'
        imageClass='h-11 w-auto md:-left-16'
      />
    </Section>

    <Section title='Skills'>
      <SkillLayout title='Languages' skills={languages} />
      <SkillLayout title='Frontend' skills={frontend} />
      <SkillLayout title='Backend' skills={backend} />
      <SkillLayout title='Others' skills={others} />
    </Section>
  </div>


</PageLayout>
